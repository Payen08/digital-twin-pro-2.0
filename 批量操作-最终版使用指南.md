# 🎯 批量操作功能 - 最终版使用指南

## ✅ 功能说明

批量操作功能已完美集成！现在可以通过 **Shift + 拖动** 框选多个对象，右侧属性面板会自动显示批量操作选项。

## 🚀 使用方法（2步）

### 步骤 1: 框选对象
- **按住 Shift 键**
- **拖动鼠标**画出选择框
- 释放鼠标完成选择

### 步骤 2: 在右侧面板操作
框选完成后，**右侧属性面板**会自动显示批量操作选项

## 🎨 右侧面板功能

### 📋 批量操作标题
```
✓✓ 批量操作
已选择 3 个对象
```

### 📐 对齐功能
```
┌─────────────────────────────┐
│ [左对齐] [居中] [右对齐]     │
│ [水平分布] [垂直分布]        │
└─────────────────────────────┘
```

- **左对齐** - 所有对象左边缘对齐
- **居中** - 所有对象水平居中对齐
- **右对齐** - 所有对象右边缘对齐
- **水平分布** - X轴均匀分布（需≥3个对象）
- **垂直分布** - Z轴均匀分布（需≥3个对象）

### 🛠️ 操作功能
```
┌─────────────────────────────┐
│ [📋 复制]                    │
│ [📦 组合]                    │
│ [🗑️ 删除选中]               │
└─────────────────────────────┘
```

- **复制** - 复制所有选中对象（X轴偏移2个单位）
- **组合** - 将多个对象组合成一个 Group
- **删除选中** - 删除所有选中对象（需确认）

## 💡 使用技巧

### 快速框选
```
按住 Shift → 拖动鼠标 → 出现蓝色框 → 释放 → 右侧面板显示
```

### 对齐示例
1. 框选3个立方体
2. 点击"居中"按钮
3. 所有立方体水平居中对齐

### 分布示例
1. 框选5个对象
2. 点击"水平分布"
3. 对象在X轴上均匀分布

## 🎬 实际操作流程

### 示例 1: 对齐墙体
```
1. 按住 Shift 键
2. 拖动鼠标框选多个墙体
3. 右侧面板显示批量操作
4. 点击"左对齐"
5. 所有墙体左边缘对齐
```

### 示例 2: 均匀分布设备
```
1. 按住 Shift 键框选5个设备
2. 点击"水平分布"
3. 设备在X轴上均匀分布
```

### 示例 3: 批量复制
```
1. 框选需要复制的对象
2. 点击"复制"
3. 新对象出现在右侧
```

## 📝 注意事项

### ✅ 优点
- **无需额外工具** - 直接 Shift + 拖动即可
- **自动显示面板** - 框选后自动显示批量操作
- **集成界面** - 操作选项在右侧面板，不遮挡视图
- **功能丰富** - 对齐、分布、复制、组合、删除

### ⚠️ 注意
1. **必须按住 Shift 键**才能框选
2. 框选时会出现蓝色虚线框
3. 分布功能需要至少3个对象
4. 删除操作不可撤销，请谨慎使用
5. 取消选择：点击空白处或按 ESC 键

## 🆚 与其他软件对比

| 软件 | 框选方式 | 操作面板位置 |
|------|----------|-------------|
| **本应用** | Shift + 拖动 | 右侧属性面板 |
| Blender | B 键 + 拖动 | 顶部工具栏 |
| Unity | 直接拖动 | Inspector 面板 |
| UE5 | 直接拖动 | Details 面板 |

## 🎯 功能对比

| 功能 | 说明 | 快捷键 |
|------|------|--------|
| 框选 | 选择多个对象 | Shift + 拖动 |
| 左对齐 | 左边缘对齐 | - |
| 居中 | 水平居中对齐 | - |
| 右对齐 | 右边缘对齐 | - |
| 水平分布 | X轴均匀分布 | - |
| 垂直分布 | Z轴均匀分布 | - |
| 复制 | 批量复制 | - |
| 组合 | 组合成 Group | - |
| 删除 | 批量删除 | Delete |

## 🔧 技术细节

### 框选实现
- 使用 Three.js 的 `SelectionBox` 和 `SelectionHelper`
- 通过 Shift 键控制激活
- 自动过滤不可选择的对象（网格、辅助线等）

### 对齐算法
- 计算所有对象的包围盒
- 根据包围盒边界调整对象位置
- 保持对象的原始尺寸和旋转

### 分布算法
- 按位置排序对象
- 计算均匀间隔
- 重新分配对象位置

## 💻 开发者信息

### 相关文件
- `src/App.jsx` - 主应用文件（已集成）
- `src/components/BoxSelection.jsx` - 框选组件
- `src/hooks/useBatchOperations.js` - 批量操作 Hook

### 状态管理
```javascript
const [batchSelectedObjects, setBatchSelectedObjects] = useState([]);
const [sceneRef, setSceneRef] = useState(null);
```

### 核心代码
```javascript
// 框选功能
<BoxSelectionIntegration 
    onSelectionChange={setBatchSelectedObjects}
    enabled={true}
/>

// 右侧面板
{batchSelected.length > 0 ? (
    // 显示批量操作面板
) : selectedObject ? (
    // 显示单个对象属性
) : (
    // 显示场景属性
)}
```

## 🎉 开始使用

现在就试试吧！

1. 在场景中添加几个对象
2. 按住 Shift 键
3. 拖动鼠标框选对象
4. 在右侧面板进行批量操作

## 🐛 常见问题

### Q: 按 Shift 拖动没反应？
**A:** 检查：
- 场景中是否有可选择的对象
- 对象是否可见（visible: true）
- 浏览器控制台是否有错误

### Q: 右侧面板没显示批量操作？
**A:** 确认：
- 是否成功框选到对象
- 控制台是否输出 "✅ 框选完成"
- 刷新页面重试

### Q: 对齐功能不生效？
**A:** 可能原因：
- 对象没有正确的包围盒
- 对象是 Group 类型
- 查看控制台错误信息

## 📚 更多资源

- **完整文档**: `BATCH_OPERATIONS_README.md`
- **集成指南**: `BATCH_OPERATIONS_INTEGRATION.md`
- **代码示例**: `src/components/BatchOperationsDemo.jsx`

---

**提示**：第一次使用时，建议先用"复制"功能测试，这样不会破坏现有对象。

**快捷键提醒**：Shift + 拖动 = 框选多个对象 🎯
